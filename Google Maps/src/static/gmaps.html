
		<html>
			<head>
				<meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
				<meta charset="utf-8">
				<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDUqZDJn8yWjIKJ4nUsHQGuEAvZHar41rs&sensor=false"></script>
				<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
				<script type="text/javascript">
					
			var map;
			var poly;
			var infoWindow;

			function initialize() {
				var mapOptions = {
					zoom: 5,
					mapTypeId: google.maps.MapTypeId.ROADMAP,
					center: new google.maps.LatLng(0,0)
				};
				map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
		
				var coordinates1 = [
					new google.maps.LatLng(0,0),
					new google.maps.LatLng(30,-30),
					new google.maps.LatLng(100,0),
				];
				
				var polygon1 = new google.maps.Polygon({
					path: coordinates1,
					fillColor: '#FFFFFF',
					fillOpacity: 0.5,
					strokeColor: '#000000',
					strokeOpacity: 1,
					strokeWeight: 3
				});
				polygon1.setMap(map);
				
				var pathArray = [
					new google.maps.LatLng(0,0),
					new google.maps.LatLng(10,-20),
					new google.maps.LatLng(120,24),
				];
				
				infoWindow = new google.maps.InfoWindow();
				var polyOptions = {
			
					path: pathArray,
				
					strokeColor: '#000000',
					strokeWeight: 3,
					strokeOpacity: 1.0
				};
				poly = new google.maps.Polyline(polyOptions);
				poly.setEditable(true);
				poly.setMap(map);
			
				google.maps.event.addListener(map, 'click', addPoint);
				google.maps.event.addListener(poly, 'click', showCoordinate);
				$("#coordButton").click(function(event){
		          var data = poly.getPath().getArray();
		          var coordArray = $.map(data, function(coord){
		            return {
		                      lat: coord.lat(),
		                      lng: coord.lng()
		                    }
		          });
		          console.log(poly.getPath().getArray());
		          $.post("http://localhost:5000",
		          {
		            "path": coordArray //poly.getPath().getArray()
		          });
		        });
			}

			function showCoordinate(event) {
				var message = "Longitude: " + event.latLng.lat() + "<br />";
				message += "Latitude: " + event.latLng.lng() + "<br />";
				infoWindow.setContent(message);
				infoWindow.setPosition(event.latLng);
				infoWindow.open(map);
			}

			function addPoint(event) {
				// All arrays are passed by reference in js
				var path = poly.getPath();
				path.push(event.latLng);
			}
			
				</script>
			</head>
			<body onload="initialize()">
				<button type="button" id="coordButton">Send Coordinates</button>
				<div id="map_canvas" style="width: 100%; height: 100%;"></div>
			</body>
		</html>
		